# Minimal zshrc for servers
# Overrides the full zshrc - no Zim/OMZ, just basics

export DOTFILES="$HOME/workspace/dotfiles"
export ZSH_FRAMEWORK=plain

# History
setopt HIST_IGNORE_ALL_DUPS
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_IGNORE_SPACE
setopt HIST_REDUCE_BLANKS
setopt SHARE_HISTORY

# Vi mode
bindkey -v
WORDCHARS=${WORDCHARS//[\/]}

# Framework
source $DOTFILES/zsh/frameworks/plain/init.zsh

# Exports
export EDITOR=nvim
export VISUAL=nvim
[[ -d $HOME/.local/bin ]] && export PATH="$HOME/.local/bin:$PATH"

# Aliases
alias vi="nvim"
alias vim="nvim"
command -v bat &>/dev/null && alias cat='bat'
command -v eza &>/dev/null && alias ls='eza'

# Tools
if command -v zoxide &>/dev/null; then
  eval "$(zoxide init --cmd cd zsh)"
fi

# Prompt
if ! command -v starship &>/dev/null; then
  PROMPT='%n@%m:%~$ '
else
  eval "$(starship init zsh)"
fi

# Local overrides
[[ -f ~/.zshrc.local ]] && source ~/.zshrc.local
