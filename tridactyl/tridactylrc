" vim: set filetype=tridactyl

" Containers
" These isolate cookies/sessions so you can have separate logins
set auconcreatecontainer true

containercreate Personal blue fingerprint
containercreate Trading green dollar
containercreate Cosmix purple briefcase

" Uncomment to auto-open specific sites in containers
" autocontain -s simplertrading\.com Trading
" autocontain -s optionalpha\.com Trading
" autocontain -s tipranks\.com Trading


" Tab management

" Close duplicate tabs (keeps first, closes the rest)
command closeDuplicates jsb browser.tabs.query({}).then(tabs => { const seen = new Map(); const toClose = []; tabs.forEach(t => { if (seen.has(t.url)) { toClose.push(t.id); } else { seen.set(t.url, t.id); } }); if (toClose.length > 0) { browser.tabs.remove(toClose); tri.excmds.fillcmdline_tmp(3000, "# Closed " + toClose.length + " duplicate tab(s)"); } else { tri.excmds.fillcmdline_tmp(3000, "# No duplicate tabs found"); } })

" Same but only in current window
command closeDuplicatesWindow jsb browser.tabs.query({currentWindow: true}).then(tabs => { const seen = new Map(); const toClose = []; tabs.forEach(t => { if (seen.has(t.url)) { toClose.push(t.id); } else { seen.set(t.url, t.id); } }); if (toClose.length > 0) { browser.tabs.remove(toClose); tri.excmds.fillcmdline_tmp(3000, "# Closed " + toClose.length + " duplicate(s)"); } else { tri.excmds.fillcmdline_tmp(3000, "# No duplicates found"); } })

" Sort all tabs alphabetically by URL
alias tabsort jsb browser.tabs.query({}).then(tabs => tabs.sort((t1, t2) => t1.url.localeCompare(t2.url)).forEach((tab, index) => browser.tabs.move(tab.id, {index})))

" Close all tabs matching a keyword, e.g. :closetabs youtube
command closetabs jsb -p browser.tabs.query({}).then(tabs => { let count = 0; tabs.forEach(t => { if(t.url.includes(JS_ARG)) { browser.tabs.remove(t.id); count++; } }); tri.excmds.fillcmdline_tmp(3000, "# Closed " + count + " tab(s)"); })


" Bindings

bind ,du closeDuplicates
bind ,so tabsort
